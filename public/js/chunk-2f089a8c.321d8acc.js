(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2f089a8c"],{"74b3":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"row"},[r("div",{staticClass:"col-lg-4 offset-lg-4"},[r("form",{on:{submit:e.checkAndSaveAwsKeys}},[r("div",{staticClass:"card no-shadow"},[e._m(0),r("div",{staticClass:"card-body"},[r("div",{staticClass:"small mb-3"},[e._v("In order to integrate with your AWS account and S3 bucket(s), you need to enter a valid AWS Access Key and Secret we will use to make API requests to sync your S3 bucket information.")]),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"aws-key"}},[e._v("AWS Access Key")]),e.hasCred?r("div",[r("strong",[e._v(e._s(e.computedKey))])]):[r("input",{directives:[{name:"model",rawName:"v-model",value:e.awsKey,expression:"awsKey"}],staticClass:"form-control",attrs:{id:"aws-key"},domProps:{value:e.awsKey},on:{input:function(t){t.target.composing||(e.awsKey=t.target.value)}}})]],2),e.hasCred?e._e():[r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"aws-secret"}},[e._v("AWS Access Secret")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.awsSecret,expression:"awsSecret"}],staticClass:"form-control",attrs:{id:"aws-secret",type:"password"},domProps:{value:e.awsSecret},on:{input:function(t){t.target.composing||(e.awsSecret=t.target.value)}}})]),r("div",{staticClass:"form-group d-flex justify-content-center"},[e.isCheckingKey?r("loader"):r("button",{staticClass:"btn btn-primary"},[e._v("Add Key")])],1)],e.hasCred?[r("hr"),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"all-buckets"}},[e._v("Select Bucket")]),r("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedBucketName,expression:"selectedBucketName"}],staticClass:"form-control",attrs:{id:"all-buckets"},on:{change:[function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selectedBucketName=t.target.multiple?r:r[0]},e.selectBucket]}},e._l(e.buckets,(function(t){return r("option",{domProps:{value:t.Name}},[e._v(e._s(t.Name))])})),0)])]:e._e()],2)])])])])},a=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"card-header border-0"},[r("h3",{staticClass:"m-0"},[e._v("Enter your AWS Access Key")])])}],s=r("a34a"),c=r.n(s),u=r("2f62"),o=r("7fdf");function i(e,t,r,n,a,s,c){try{var u=e[s](c),o=u.value}catch(i){return void r(i)}u.done?t(o):Promise.resolve(o).then(n,a)}function l(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var s=e.apply(t,r);function c(e){i(s,n,a,c,u,"next",e)}function u(e){i(s,n,a,c,u,"throw",e)}c(void 0)}))}}function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){f(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var v={data:function(){return{isCheckingKey:!1,awsKey:null,awsSecret:null,buckets:[],selectedBucketName:null}},computed:p(p({},Object(u["b"])({hasCred:function(e){return e.session.current_credential}})),{},{computedKey:function(){return this.hasCred&&this.hasCred.key||this.awsKey}}),methods:{checkAndSaveAwsKeys:function(e){var t=this;return l(c.a.mark((function r(){return c.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(r.prev=0,e.preventDefault(),t.computedKey&&t.awsSecret){r.next=4;break}return r.abrupt("return",window.toastr.error("Please enter both and access key and secret to add."));case 4:return t.isCheckingKey=!0,r.next=7,o["a"].checkAndSaveKey(t.computedKey,t.awsSecret);case 7:return r.next=9,Promise.all([t.$store.dispatch("getUserSession",!0),t.listBuckets()]);case 9:r.next=14;break;case 11:r.prev=11,r.t0=r["catch"](0),window.toastr.error(r.t0.message);case 14:return r.prev=14,t.isCheckingKey=!1,r.finish(14);case 17:case"end":return r.stop()}}),r,null,[[0,11,14,17]])})))()},selectBucket:function(){var e=this;return l(c.a.mark((function t(){return c.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,e.selectedBucketName){t.next=3;break}return t.abrupt("return",window.toastr.error("Please enter a valid bucket to integrate with."));case 3:return t.next=5,o["a"].saveBucket(e.selectedBucketName);case 5:return t.next=7,e.$store.dispatch("getUserSession",!0);case 7:e.$router.push("/"),t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](0),window.toastr.error(t.t0.message);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})))()},listBuckets:function(){var e=this;return l(c.a.mark((function t(){var r,n;return c.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o["a"].listBuckets();case 3:r=t.sent,n=r.Buckets,e.buckets=n,t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),window.toastr.error(t.t0.message);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()}},created:function(){var e=this;return l(c.a.mark((function t(){return c.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.hasCred){t.next=3;break}return t.next=3,e.listBuckets();case 3:case"end":return t.stop()}}),t)})))()}},w=v,h=r("2877"),m=Object(h["a"])(w,n,a,!1,null,null,null);t["default"]=m.exports},"7fdf":function(e,t,r){"use strict";var n=r("a34a"),a=r.n(n),s=r("e2fb"),c=r("f259");function u(e,t,r,n,a,s,c){try{var u=e[s](c),o=u.value}catch(i){return void r(i)}u.done?t(o):Promise.resolve(o).then(n,a)}function o(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var s=e.apply(t,r);function c(e){u(s,n,a,c,o,"next",e)}function o(e){u(s,n,a,c,o,"throw",e)}c(void 0)}))}}t["a"]={listBuckets:function(){return o(a.a.mark((function e(){var t;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(s["a"])("/api/1.0/aws/buckets/list");case 2:return t=e.sent,e.next=5,Object(c["a"])(t);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))()},checkAndSaveKey:function(e,t){return o(a.a.mark((function r(){var n;return a.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Object(s["a"])("/api/1.0/aws/key/check/save",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({awsKey:e,awsSecret:t})});case 2:return n=r.sent,r.next=5,Object(c["a"])(n);case 5:return r.abrupt("return",r.sent);case 6:case"end":return r.stop()}}),r)})))()},saveBucket:function(e){return o(a.a.mark((function t(){var r;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(s["a"])("/api/1.0/aws/bucket/save",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({bucket:e})});case 2:return r=t.sent,t.next=5,Object(c["a"])(r);case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t)})))()},syncCurrentBucket:function(){return o(a.a.mark((function e(){var t;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(s["a"])("/api/1.0/aws/bucket/sync");case 2:return t=e.sent,e.next=5,Object(c["a"])(t);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))()}}}}]);
//# sourceMappingURL=chunk-2f089a8c.321d8acc.js.map